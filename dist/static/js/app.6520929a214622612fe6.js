webpackJsonp([1],{100:function(e,t,n){"use strict";var i=n(13),a=n(29);t.a={getColumnsKey:function(e){var t=a.a.getUserInfo().account,n=i.a.getStorage(window.$CONST.CONFIG_COLUMNS_KEY);return e&&n&&n[t]?n[t][e]:void 0},setColumnsKey:function(e){i.a.setStorage(window.$CONST.CONFIG_COLUMNS_KEY,e)},clearColumnsKey:function(){i.a.rmStorage(window.$CONST.CONFIG_COLUMNS_KEY)}}},101:function(e,t,n){"use strict";t.a={page:{total:"totalElements",content:"content"}}},102:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(50),a=n(77),s=n.n(a),r=n(49),o=(n.n(r),n(75)),l=n(79),c=n.n(l),u=n(76),f=(n.n(u),n(78)),d=n.n(f),h=n(74);n.i(o.a)(),i.default.use(d.a,h.a),i.default.use(s.a),new i.default({el:"#app",template:"<App/>",components:{App:c.a}})},13:function(e,t,n){"use strict";function i(e,t){L.$emit(e,t)}function a(e,t){L.$on(e,t)}function s(e){if("object"!==(void 0===e?"undefined":R()(e)))return e;try{return JSON&&M()(e)}catch(e){return null}}function r(e){if("string"!=typeof e)return e;try{return JSON&&JSON.parse(e)}catch(e){return null}}function o(e,t){if(2===arguments.length){var n=t;"object"===(void 0===n?"undefined":R()(n))?(n=M()(n),n="obj-"+n):n="str-"+n,localStorage.setItem(e,n)}}function l(e){var t=localStorage.getItem(e);if(t)return 0===t.indexOf("obj-")?(t=t.slice(4),JSON.parse(t)):0===t.indexOf("str-")?t.slice(4):void 0}function c(e){localStorage.removeItem(e)}function u(){localStorage.clear()}function f(e,t){if(2===arguments.length){var n=t;"object"===(void 0===n?"undefined":R()(n))?(n=M()(n),n="obj-"+n):n="str-"+n,sessionStorage.setItem(e,n)}}function d(e){var t=sessionStorage.getItem(e);if(t)return 0===t.indexOf("obj-")?(t=t.slice(4),JSON.parse(t)):0===t.indexOf("str-")?t.slice(4):void 0}function h(e){sessionStorage.removeItem(e)}function g(){sessionStorage.clear()}function p(e){return e<=0?0:e-1}function m(e,t){var n=[];return e.forEach(function(e){n.push(e[t])}),n}function C(e){var t=new O.a(e);return K()(t)}function v(e){for(var t=new RegExp("[`':;',‘；：”“'。，、？ ]"),n="",i=0;i<e.length;i++)n+=e.substr(i,1).replace(t,"");return n}function y(e,t){t.map(function(t){$()(e).includes(t)&&(e[t]=v(e[t]))})}function S(e,t){$()(e).forEach(function(n){null!=t[n]&&(e[n]=t[n])})}function b(e,t){$()(e).forEach(function(n){e[n]=t[n]})}function w(e){if("object"===(void 0===e?"undefined":R()(e))){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}var i={};for(var a in e)i[a]=this.cloneObject(e[a]);return i}return e}function x(e){if(!e)return"--";var t,n=e.split("-"),i=n[0],a=n[1],s=n[2],r=new Date,o=r.getFullYear(),l=r.getMonth()+1,c=r.getDate();if(o===i)t=0;else{var u=o-i;if(u>0)if(l===a){var f=c-s;t=f<0?u-1:u}else{var d=l-a;t=d<0?u-1:u}else t=-1}return t}function k(e){var t=/[0-9]+/;return t.test(e)}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"yyyy-MM-dd",n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return t}function _(e){return e.replace(/<[^>]+>/g,"")}var I=n(107),$=n.n(I),E=n(56),K=n.n(E),N=n(109),O=n.n(N),D=n(104),M=n.n(D),A=n(113),R=n.n(A),U=n(176),L=new U.a;t.a={jsonToStr:s,strToJson:r,setStorage:o,getStorage:l,rmStorage:c,clearStorage:u,setSessionStorage:f,getSessionStorage:d,rmSessionStorage:h,clearSessionStorage:g,analysisPage:p,getColumnData:m,addEvent:a,sendEvent:i,unique:C,trim:v,clearString:y,copyObj:S,copyObjAll:b,fullCopyObj:w,computeAge:x,checkNumber:k,delHtmlTag:_,formatDate:T}},165:function(e,t){},166:function(e,t){},167:function(e,t){},170:function(e,t,n){n(167);var i=n(48)(n(98),n(174),null,null);e.exports=i.exports},171:function(e,t,n){n(166);var i=n(48)(n(99),n(173),null,null);e.exports=i.exports},172:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{width:"80%",margin:"50px auto"},attrs:{id:"app"}},[n("button-group",{staticClass:"mb-10"},[n("Button",{on:{click:e.switchCMode}},[e._v("check模式")]),e._v(" "),n("Button",{on:{click:e.switchTMode}},[e._v("transfer模式")])],1),e._v(" "),n("func-table",{attrs:{id:"table-001",columns:e.columns,pageConfig:e.pageConfig,searchConfig:e.searchConfig,filterConfig:e.filterConfig},on:{"on-selection-change":e.getIds},model:{value:e.fetchConfig,callback:function(t){e.fetchConfig=t},expression:"fetchConfig"}},[n("div",{attrs:{slot:"batch-operation"},slot:"batch-operation"},[n("Button",{on:{click:e.handlerAdd}},[e._v("添加")]),e._v(" "),n("Button",{on:{click:e.handlerBatchDel}},[e._v("删除")])],1)])],1)},staticRenderFns:[]}},173:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"transfer"},[n("Transfer",{ref:"Transfer",staticClass:"d-ib",attrs:{"render-format":e.render,data:e.data,titles:e.titles,"target-keys":e.targetKeys,operations:["向左移动","向右移动"],"list-style":e.listStyle,"selected-keys":e.selectedKeys},on:{"on-change":e.onChange}}),e._v(" "),n("div",{staticClass:"d-ib ml-10 transfer-move"},[n("Button",{staticClass:"d-b",on:{click:e.goUp}},[e._v("上移")]),e._v(" "),n("Button",{staticClass:"d-b mt-10",on:{click:e.goDown}},[e._v("下移")])],1)],1)},staticRenderFns:[]}},174:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"func-table"},[n("div",{staticClass:"clearfix func-table-top mb-10"},[n("div",{staticClass:"func-table-batch-operation f-l"},[e._t("batch-operation")],2),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.refreshable,expression:"refreshable"}],staticClass:"func-table-refresh f-l ml-5"},[n("Button",{on:{click:e.refresh}},[e._v("刷新")])],1),e._v(" "),e.searchConfig?n("div",{staticClass:"func-table-search f-r"},[n("div",{staticClass:"clearfix"},[n("Button-group",{staticClass:"f-r ml-10"},[n("Button",{staticClass:"f-r",attrs:{icon:"ios-search"},on:{click:function(t){e.doSearch(e.searchInput)}}},[e._v("查询")])],1),e._v(" "),n("Button-group",{staticClass:"f-r ml-10"},[n("Input",{staticClass:"ivu-input-default f-r",attrs:{placeholder:e.searchConfig.placeholder,maxlength:e.searchConfig.maxLength},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}})],1)],1)]):e._e()]),e._v(" "),n("div",{staticClass:"func-table-main mb-10"},[e.filterConfig?n("div",{staticClass:"func-table-filter"},[e.modalTransfer.exist?n("div",[n("Modal",{directives:[{name:"show",rawName:"v-show",value:e.isTransferMode,expression:"isTransferMode"}],attrs:{title:e.modalTransfer.title,width:"720px"},on:{"on-ok":e.saveColumnsConfig},model:{value:e.modalTransfer.show,callback:function(t){e.$set(e.modalTransfer,"show",t)},expression:"modalTransfer.show"}},[n("CTransfer",{ref:"CTransfer",attrs:{disabledSelections:e.disabledSelections,data:e.transferData,titles:e.titles},on:{"on-right-data-change":e.handleRightDataChange},model:{value:e.targetKeys,callback:function(t){e.targetKeys=t},expression:"targetKeys"}})],1)],1):e._e(),e._v(" "),n("div",{staticClass:"clearfix"},[n("Checkbox-group",{directives:[{name:"show",rawName:"v-show",value:e.isCheckMode,expression:"isCheckMode"}],ref:"checkList",staticClass:"mt-10 f-l",on:{"on-change":e.fillTableColumns,"on-current-change":e.CurrentChange,"on-select":e.Select,"on-select-cancel":e.SelectCancel,"on-select-all":e.SelectAll,"on-selection-change":e.SelectionChange,"on-sort-change":e.SortChange,"on-row-click":e.RowClick,"on-row-dblclick":e.RowDblclick,"on-expand":e.Expand},model:{value:e.tableColumnsChecked,callback:function(t){e.tableColumnsChecked=t},expression:"tableColumnsChecked"}},e._l(e.checkList,function(t,i){return n("Checkbox",{key:t,ref:"check"+i,refInFor:!0,attrs:{disabled:e.checkDisabled(t),label:t}})})),e._v(" "),e._t("default",[n("div",{staticClass:"topButton"},[e.isTransferMode?n("button",{staticClass:"but_c",on:{click:e.showModalTransfer}},[n("Icon",{attrs:{type:"compose",size:"18"}}),e._v(" 自定义列表显示内容\n            ")],1):e._e()])])],2)]):e._e(),e._v(" "),n("div",{staticClass:"topPosition spin-outer"},[n("Table",{ref:"table",attrs:{stripe:"",columns:e.filteredColumns,id:e.id,data:e.data},on:{"on-selection-change":e.setselectedData,"on-current-change":e.emitCurrentChange}}),e._v(" "),n("Spin",{directives:[{name:"show",rawName:"v-show",value:e.spin,expression:"spin"}],staticClass:"login_loading_spin",attrs:{size:"large",fix:""}},[n("Icon",{staticClass:"login-spin-icon-load",attrs:{type:"load-c",size:"18"}}),e._v(" "),n("div",[e._v("加载中...")])],1)],1)]),e._v(" "),e.pageConfig?n("div",{staticClass:"func-table-page clearfix",style:e.setPagePosition(e.pageConfig.pagePosition)},[n("Page",{ref:"page",staticStyle:{float:"none",display:"inline-block"},attrs:{total:e.total,"page-size":e.size,"show-elevator":e.pageConfig.showElevator,"show-sizer":e.pageConfig.showSizer,"show-total":""},on:{"on-change":e.pageChange,"on-page-size-change":e.pageSizeChange}})],1):e._e()])},staticRenderFns:[]}},28:function(e,t,n){"use strict";function i(e,t){if(e.style[t])return e.style[t];if(e.currentStyle)return e.currentStyle[t];if(document.defaultView&&document.defaultView.getComputedStyle){t=t.replace(/([A-Z])/g,"-$1"),t=t.toLowerCase();var n=document.defaultView.getComputedStyle(e,"");return n&&n.getPropertyValue(t)}return null}function a(e,t){b()(e.style,t)}function s(e){return"string"==typeof e.textContent?e.textContent:e.innerText}function r(e,t){"string"==typeof e.textContent?e.textContent=t:e.innerText=t}function o(e){for(var t=Array.prototype.slice.call(e.parentNode.children),n=t.length;n--;)if(t[n]===e){t.splice(n,1);break}return t}function l(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function c(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function u(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}function f(e,t){e.parentNode.insertBefore(e,t)}function d(e,t){var n=t.parentNode;n.lastChild===t?n.appendChild(e):n.insertBefore(e,t.nextSibling)}function h(e,t){var n=document.createEvent("MouseEvent");n.initEvent(e,!1,!1),t.dispatchEvent(n)}function g(e){do{e=e.nextSibling}while(e&&1!==e.nodeType);return e}function p(e){return e.nextElementSibling||g(e)}function m(e){do{e=e.previousSibling}while(e&&1!==e.nodeType);return e}function C(e){return e.previousElementSibling||m(e)}function v(e){return w.a.trim(e.textContent||e.innerText)}function y(e){return e.parentNode}var S=n(105),b=n.n(S),w=n(13);t.a={getStyle:i,setStyle:a,getInnerText:s,setInnerText:r,siblings:o,removeClass:l,addClass:c,hasClass:u,before:f,after:d,trigger:h,next:p,prev:C,text:v,parent:y}},29:function(e,t,n){"use strict";var i=n(13);t.a={checkIsLogin:function(){return!(null===i.a.getStorage(window.$CONST.USER_KEY))},setUserInfo:function(e){i.a.setStorage(window.$CONST.USER_KEY,e)},getUserInfo:function(){return i.a.getStorage(window.$CONST.USER_KEY)},logout:function(){i.a.rmStorage(window.$CONST.USER_KEY),i.a.rmStorage(window.$CONST.TOKEN_KEY)},getToken:function(){return i.a.getStorage(window.$CONST.TOKEN_KEY)},setToken:function(e){i.a.setStorage(window.$CONST.TOKEN_KEY,e)}}},74:function(e,t,n){"use strict";var i=n(49),a=n.n(i),s=a.a.create({baseURL:"https://www.easy-mock.com/mock/5a168608b38a3c5b4c7a7163/example"});s.interceptors.response.use(function(e){if(1e4!==window._.get(e,"data.code"))throw new Error("1");return e.data.data},function(e){throw e.response?new Error("2"):e.request?new Error("3"):new Error("4")}),t.a=s},75:function(e,t,n){"use strict";var i=n(168),a=n.n(i),s=n(13),r=n(28);t.a=function(){window.Null="__NULL__",window._=a.a,window.$CONST={USER_KEY:"USER_KEY",TOKEN_KEY:"X-Auth-Token",CONFIG_COLUMNS_KEY:"CONFIG_COLUMNS_KEY"},window.$HTTP={SUCCESS:0,FAIL:999},window.common=s.a,window.dom=r.a}},76:function(e,t){},79:function(e,t,n){n(165);var i=n(48)(n(97),n(172),null,null);e.exports=i.exports},97:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(29),a=n(170),s=n.n(a);t.default={name:"app",components:{FuncTable:s.a},data:function(){var e=this;return{msg:"请求中。。。",pageConfig:{showSizer:!0,showElevator:!0,pagePosition:"right"},columns:[{type:"selection",width:60,align:"center"},{title:"用户名",key:"account",render:function(t,n){var i=n.row;n.column,n.index;return t("div",[t("Button",{props:{type:"text",size:"small"},on:{click:function(){alert(e.msg)}}},i.account)])}},{title:"用户昵称",key:"name"},{title:"用户工号",key:"id"},{title:"手机号",key:"mobile"},{title:"审核状态",key:"auditStatus"},{title:"是否启用",key:"isActive",render:function(e,t){var n=t.row,i=(t.column,t.index,n.isActive);return e("div",[e("span",{class:1==i?["ligth-blue"]:["text-red"]},1==i?"启用":"禁用")])}},{title:"操作",key:"action",render:function(e,t){var n=t.row,i=(t.column,t.index,n.id),a=n.isActive;return e("div",[e("Button",{props:{type:"text",size:"small"},style:{marginRight:"5px"},on:{click:function(){alert("编辑项的id:"+i)}}},"编辑"),e("Button",{props:{type:"text",size:"small"},on:{click:function(){1==a&&alert("禁用项的id:"+i),0==a&&alert("启用项的id:"+i)}}},1==a?"禁用":"启用"),e("Button",{props:{type:"text",size:"small"},on:{click:function(){alert("删除项的id:"+i)}}},"删除")])}}],searchConfig:{placeholder:"请输入xxx",key:"account",maxlength:20},filterConfig:{mode:"check"},fetchConfig:{},ids:[]}},created:function(){i.a.setUserInfo({account:"admin"})},mounted:function(){this.load()},methods:{switchCMode:function(){this.$set(this.filterConfig,"mode","check")},switchTMode:function(){this.$set(this.filterConfig,"mode","transfer")},handlerAdd:function(){alert("添加一条内容")},handlerBatchDel:function(){alert("要删除的项id为："+(this.ids.length?this.ids:"--"))},load:function(){var e=this;this.fetchConfig={url:"/account",params:{},callback:function(t){e.msg="请求成功！"}}},getIds:function(e){this.ids=e.map(function(e,t,n){return e.id})}}}},98:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(108),a=n.n(i),s=n(30),r=n.n(s),o=n(112),l=n.n(o),c=n(106),u=n.n(c),f=n(171),d=n.n(f),h=n(100),g=n(13),p=n(28),m=n(29),C=n(101);t.default={name:"FuncTable",components:{CTransfer:d.a},model:{prop:"fetchConfig",event:"on-fetch-config-change"},props:{refreshable:{type:[Boolean],require:!1,default:!0},editConfig:{type:[Object,Boolean],require:!1,default:!1},searchConfig:{type:[Object,Boolean],require:!1,default:!1},pageConfig:{type:[Object,Boolean],require:!1,default:!1},filterConfig:{type:[Object,Boolean],require:!1,default:!1},fetchConfig:{type:Object,require:!0,default:function(){return{}}},id:{type:String,require:!1,default:""},columns:{type:Array,require:!0,default:function(){return[]}}},data:function(){return{selectedData:[],data:[],spin:!1,ids:[],size:10,page:1,total:0,url:"",params:{},forceUpdateSign:{flag:!1,page:0},filteredColumns:[],tableColumnsChecked:[],disabledSelections:["多选","操作","selection","action"],defaultKeys:["page","size"],titles:["已过滤列","已选择列"],modalTransfer:{show:!1,title:"自定义列表",exist:!1},transferRightList:[],targetKeys:[],transferData:[],keysToSave:[],configColumnsKey:null,searchInput:""}},created:function(){},mounted:function(){this.fillTableColumns()},methods:{setPagePosition:function(e){var t=void 0;switch(e){case"right":t={textAlign:"right"};break;case"middle":t={textAlign:"center"};break;case"left":t={textAlign:"left"}}return t},pageChange:function(e){this.page=e,this.load()},pageSizeChange:function(e){this.size=e,this.load()},setTotal:function(e){this.total=e},params2Str:function(e){var t="",n=u()(e),i=0,a=!0,s=!1,o=void 0;try{for(var c,f=r()(n);!(a=(c=f.next()).done);a=!0){var d=c.value,h=l()(d,2),g=h[0],p=h[1];this.defaultKeys.includes(g)||p&&(t+=(0===i?"?":"&")+g+"="+encodeURIComponent(p),i++)}}catch(e){s=!0,o=e}finally{try{!a&&f.return&&f.return()}finally{if(s)throw o}}return t},switchSign:function(e){this.forceUpdateSign.flag=!this.forceUpdateSign.flag,this.forceUpdateSign.page=e},toggleSpin:function(){this.spin=!this.spin},refresh:function(){this.resetSelectedData(),this.$set(this.fetchConfig.params,"page",1)},deletePageAndSizeInConfig:function(){delete this.fetchConfig.params.page,delete this.fetchConfig.params.size},load:function(){var e=this,t=this.fetchConfig;if(t&&(t.url&&(this.url=t.url),t.params&&(this.params=t.params,window._.isInteger(t.params.page)&&(this.page=t.params.page,this.switchSign(t.params.page)),window._.isInteger(t.params.size)&&(this.size=t.params.size))),this.updateSearchKey())return!1;var n=g.a.analysisPage(this.page),i=this.params2Str(this.params);this.toggleSpin(),this.pageConfig?this.$http.get(this.url+i+(i?"&":"?")+"page="+n+"&size="+this.size).then(function(t){e.toggleSpin(),e.deletePageAndSizeInConfig();var n=t;e.data=window._.get(n,C.a.page.content),e.total=window._.get(n,C.a.page.total),e.emitTotal(e.total),e.fetchConfig.callback&&e.fetchConfig.callback(t)}).catch(function(t){e.$Message.error("请求错误；错误信息："+t)}):this.$http.get(this.url+i).then(function(t){e.toggleSpin(),e.deletePageAndSizeInConfig();var n=t;e.data=n,e.fetchConfig.callback&&e.fetchConfig.callback(t)}).catch(function(t){e.$Message.error("请求错误；错误信息："+t)})},resetSelectedData:function(){this.selectedData=[]},setselectedData:function(e){this.selectedData=e},emitSelectionChange:function(e){this.$emit("on-selection-change",e)},emitCurrentChange:function(e,t){this.$emit("on-current-change",e,t)},clearStorage:function(){h.a.clearColumnsKey()},checkDisabled:function(e){if(this.disabledSelections.includes(e))return!0},emitTotal:function(e){this.$emit("on-total-change",e)},getTable2Columns:function(){var e=this,t=g.a.fullCopyObj(this.columns),n=[];return t.forEach(function(t){e.tableColumnsChecked.includes("多选")&&"selection"===t.type&&n.push(t),e.tableColumnsChecked.includes(t.title)&&n.push(t)}),n},fillTableColumns:function(){var e=this;if(this.updateConfigColumnsKey(),Array.isArray(this.configColumnsKey)){var t=[];this.configColumnsKey.map(function(n,i,a){var s=e.columns.find(function(e,t,i){return(e.key||e.type)===n});t.push(s)}),this.filteredColumns=t}else this.filteredColumns=this.getTable2Columns();this.$refs.table.$forceUpdate()},updateConfigColumnsKey:function(){this.configColumnsKey=h.a.getColumnsKey(this.id)},toggleFav:function(e){this.tableData2[e].fav=0===this.filteredData[e].fav?1:0},CurrentChange:function(e){},Select:function(e){},SelectCancel:function(e){},SelectAll:function(e){},SelectionChange:function(e){},SortChange:function(e){},RowClick:function(e){},RowDblclick:function(e){},Expand:function(e){},triggerClick:function(e){var t=window._.reject(e,this.isDisabled)[0],n=this.checkList.indexOf(t),i=this.$refs["check"+n][0].$el,a=i.querySelectorAll("input")[0];p.a.trigger("click",a),this.$refs["check"+n][0].$forceUpdate()},isDisabled:function(e){return this.disabledSelections.includes(e)},showModalTransfer:function(){var e=this;this.$set(this.modalTransfer,"exist",!0),this.$nextTick(function(){e.$set(e.modalTransfer,"show",!0)},0)},saveColumnsConfig:function(){this.$refs.CTransfer.emit(),this.setTargetKey()},getFullColumns:function(){this.transferData=this.changeColumns2Transfer(this.columns)},getTargetKey:function(){this.configColumnsKey?this.targetKeys=this.configColumnsKey:this.targetKeys=this.changeColumns2Transfer(this.filteredColumns).map(function(e,t){return e.key})},setTargetKey:function(){var e=h.a.getColumnsKey()||{},t=m.a.getUserInfo().account;e[t]||(e[t]={}),e[t][this.id]=this.keysToSave,h.a.setColumnsKey(e),this.fillTableColumns()},changeColumns2Transfer:function(e){var t=this,n=this.disabledSelections;return e.map(function(e,i){return{key:t.formatColumnsItemKey(e),label:t.formatColumnsItemLabel(e)+t.formatColumnsItemKey(e),disabled:n.includes(e.key)||n.includes(e.type)}})},handleRightDataChange:function(e){var t=[];e.map(function(e,n,i){t.push(e.key)}),this.keysToSave=t},changeTransfer2Columns:function(e){var t=this,n=[];e.map(function(e,i,a){var s=t.columns.find(function(t,n,i){return(t.key||t.type)===e.key});n.push(s)}),this.filteredColumns=n},exportData:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]},formatColumnsItemLabel:function(e){return e.title||("selection"===e.type?"多选":"--")},formatColumnsItemKey:function(e){return e.key||e.type},resetPage:function(){this.page=1},doSearch:function(e){this.resetPage(),this.updateSearchKey()},updateSearchKey:function(){var e=!1;return this.searchConfig?(this.fetchConfig.params[this.searchConfig.key]!==this.searchInput&&(this.$set(this.fetchConfig.params,this.searchConfig.key,this.searchInput),e=!0),e):e}},watch:{selectedData:function(e){this.emitSelectionChange(e)},"forceUpdateSign.flag":function(e){var t=this.$refs.page;t.currentPage=this.forceUpdateSign.page,t.$forceUpdate()},tableColumnsChecked:function(e,t){window._.reject(e,this.isDisabled).length||(this.tableColumnsChecked=t,this.$Message.warning("请至少保留一条有效列内容！"),this.triggerClick(t)),this.isCheckMode&&(this.filteredColumns=this.getTable2Columns())},"modalTransfer.show":function(e){var t=this;e?(this.getFullColumns(),this.getTargetKey()):(this.$refs.CTransfer.reset(),this.$nextTick(function(){t.$set(t.modalTransfer,"exist",!1)}))},fetchConfig:{handler:function(e){this.$emit("on-fetch-config-change",e),this.load(e)},deep:!0}},computed:{checkList:function(){var e=this,t=a()(this.columns).map(function(t){return e.formatColumnsItemLabel(t)});return this.tableColumnsChecked=t,t},isCheckMode:function(){return"check"===this.filterConfig.mode},isTransferMode:function(){return"transfer"===this.filterConfig.mode}}}},99:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(56),a=n.n(i),s=n(30),r=n.n(s),o=n(13),l=n(28);t.default={name:"CTransfer",model:{prop:"targetKeys",event:"on-target-keys-change"},props:{data:{type:Array,required:!0,default:function(){return[{key:"1",label:"内容1",disabled:!1},{key:"2",label:"内容2",disabled:!1},{key:"3",label:"内容3",disabled:!1}]}},targetKeys:{type:Array,required:!1,default:function(){return[]}},titles:{type:Array,required:!1,default:function(){return["源列表","目的列表"]}},disabledSelections:{type:Array,required:!1,default:function(){return[]}}},data:function(){return{listStyle:{width:"250px",height:"300px"},selectedKeys:[],label:"",selectedIndex:null,itemClassName:"ivu-transfer-list-content-item",orderedRightData:null}},mounted:function(){this.$refs.Transfer.$el.querySelectorAll(".ivu-transfer-list")[1].querySelector(".ivu-transfer-list-content").addEventListener("click",this.handleClick.bind(this))},beforeDestroy:function(){this.$refs.Transfer.$el.querySelectorAll(".ivu-transfer-list")[1].querySelector(".ivu-transfer-list-content").removeEventListener("click",this.handleClick.bind(this))},methods:{handleClick:function(e){var t=this,n=e.target;if("SPAN"===n.tagName&&(n=l.a.parent(n)),n.querySelector("input").disabled)return!1;if(l.a.hasClass(n,this.itemClassName))if(l.a.hasClass(n,"active"))l.a.removeClass(n,"active"),this.label="",this.clearSelectedIndex();else{l.a.addClass(n,"active"),this.label=l.a.getInnerText(n.getElementsByTagName("span")[0]);var i=l.a.siblings(n).filter(function(e){return l.a.hasClass(e,t.itemClassName)}),a=!0,s=!1,o=void 0;try{for(var c,u=r()(i);!(a=(c=u.next()).done);a=!0){var f=c.value;l.a.removeClass(f,"active")}}catch(e){s=!0,o=e}finally{try{!a&&u.return&&u.return()}finally{if(s)throw o}}this.getSelectedIndex(n)}},reset:function(){this.orderedRightData=null;var e=this.getSelectedItem().selectedItem;e&&l.a.removeClass(e,"active"),this.selectedIndex=null,this.selectedKeys.length=null},render:function(e){return e.label},onChange:function(e){var t=this;e.map(function(e,n,i){if(t.disabledSelections.includes(e)&&n!==i.length-1&&0!==n){var a=e;i.splice(n,1),i.unshift(a)}}),this.$emit("on-target-keys-change",e)},getSelectedItem:function(){var e=this.$refs.Transfer,t=e.$el,n=t.querySelectorAll(".ivu-transfer-list")[1].querySelectorAll(".ivu-transfer-list-content .ivu-transfer-list-content-item");return{switchList:n,selectedItem:null!=this.selectedIndex?n[this.selectedIndex]:null}},goUp:function(){if(null===this.selectedIndex)return!1;var e=this.getSelectedItem().switchList,t=this.getSelectedItem().selectedItem,n=l.a.text(t);0!==a()(e).indexOf(t)&&(l.a.prev(t).querySelector("input").disabled||(l.a.before(t,e[this.selectedIndex-1]),this.selectedIndex-=1,this.orderTransferRightData(n,"up")))},goDown:function(){if(null===this.selectedIndex)return!1;var e=this.getSelectedItem().switchList,t=this.getSelectedItem().selectedItem,n=l.a.text(t);a()(e).indexOf(t)!==e.length-1&&(l.a.next(t).querySelector("input").disabled||(l.a.after(t,e[this.selectedIndex+1]),this.selectedIndex+=1,this.orderTransferRightData(n,"down")))},orderTransferRightData:function(e,t){var n=this.$refs.Transfer.rightData,i=n.findIndex(function(t,n,i){return o.a.trim(e)===t.label}),a=void 0;switch(t){case"up":a=n[i],n[i]=n[i-1],n[i-1]=a;break;case"down":a=n[i],n[i]=n[i+1],n[i+1]=a}this.orderedRightData=n,this.$forceUpdate()},emit:function(){this.$emit("on-right-data-change",this.orderedRightData)},getSelectedIndex:function(e){this.selectedIndex=a()(e.parentNode.children).indexOf(e)},clearSelectedIndex:function(){this.selectedIndex=null}},watch:{targetKeys:function(e){var t=this,n=[];e.map(function(e,i,a){var s=t.data.find(function(t,n,i){return t.key===e});n.push(s)}),this.orderedRightData=n}},computed:{}}}},[102]);
//# sourceMappingURL=app.6520929a214622612fe6.js.map